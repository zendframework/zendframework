<?xml version="1.0" encoding="utf-8"?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="zend.log.filters"><info><title>Filtres</title></info>
    

    <para>Un objet <code>Filter</code> bloque les messages avant l'écriture dans le log.</para>

    <section xml:id="zend.log.filters.all-writers"><info><title>Filtrer pour tous les rédacteurs (Writers)</title></info>
        

        <para>
            Pour filtrer avant tous les rédacteurs, vous pouvez ajouter autant de filtres que
            vous souhaitez à l'objet enregistreur en utilisant la méthode <methodname>addFilter()</methodname> :
            <programlisting language="php"><![CDATA[
$logger = new Zend_Log();

$redacteur = new Zend_Log_Writer_Stream('php://output');
$logger->addWriter($redacteur);

$filtre = new Zend_Log_Filter_Priority(Zend_Log::CRIT);
$logger->addFilter($filtre);

// bloqué
$logger->info("Message d'information");

// écrit dans le log
$logger->emerg("Message d'urgence");
]]></programlisting> Quand vous ajoutez un ou plusieurs filtres à l'objet enregistreur, le
            message doit passer par tous les filtres avant que tous les rédacteurs le
            reçoive.
        </para>
    </section>

    <section xml:id="zend.log.filters.single-writer"><info><title>Filtrer pour une seule instance de rédacteur</title></info>
        

        <para>
            Pour filtrer seulement sur un instance spécifique de rédacteur, employer la
            méthode <methodname>addFilter()</methodname> de ce rédacteur : <programlisting language="php"><![CDATA[
$logger = new Zend_Log();

$redacteur1 =
    new Zend_Log_Writer_Stream('/chemin/vers/premier/fichierdelog');
$logger->addWriter($redacteur1);

$redacteur2 =
    new Zend_Log_Writer_Stream('/chemin/vers/second/fichierdelog');
$logger->addWriter($redacteur2);

// ajoute le filter seulement pour le redacteur2
$filter = new Zend_Log_Filter_Priority(Zend_Log::CRIT);
$redacteur2->addFilter($filter);

// écrit par le redacteur1, bloqué par le redacteur2
$logger->info("Message d'information");

// écrit dans les 2 logs
$logger->emerg("Message d'urgence");
]]></programlisting></para>
    </section>
</section>
